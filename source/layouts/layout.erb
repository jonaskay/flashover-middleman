<!doctype html>
<html>
  <head>
    <% if build? %>
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=UA-116599641-4"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-116599641-4');
      </script>
    <% end %>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Use the title from a page's frontmatter if it has one -->
    <title><%= "#{current_page.data.title} | Flashover" || "Flashover" %></title>
    <%= feed_tag :atom, "#{blog.options.prefix.to_s}/feed.xml", title: "Atom Feed" %>

    <%= tag :link, rel: 'icon', type: 'image/png', href: image_url('icon.png') %>
    <%= tag :meta, property: 'og:title', content: current_page.data.title || "Flashover" %>
    <%= tag :meta, property: 'og:type', content: current_page.data.type || "website" %>
    <%= tag :meta, property: 'og:url', content: current_url(current_page.url) %>
    <%= tag :meta, property: 'og:description', content: current_page.data.description || config[:site_description] %>

    <%= stylesheet_link_tag "site" %>
    <%= javascript_include_tag "site" %>
  </head>
  <body data-menu-open="false">
    <div class="mask" id="mask"></div>
    <div class="container mx-auto px-2 py-1">
      <header class="relative py-2 border-b">
        <button class="menu-button absolute pin-l pin-t mt-3 md:hidden" id="menuButton">
          <div></div><div></div><div></div>
        </button>
        <h1 class="text-center text-3xl md:text-4xl">
          <%= link_to 'Flashover', '/', class: 'no-underline text-black' %>
        </h1>
      </header>
    </div>
    <div class="p-4">
      <div class="container mx-auto md:flex xl:relative" id="content">
        <div class="menu z-10 fixed pin-y md:relative md:pin-none xl:absolute xl:pin-l xl:pin-t w-xxs md:w-1/3 xl:max-w-xxs p-4 md:pl-2 md:pr-8 md:mb-8 xl:m-0 border-r md:border-none text-left bg-white" id="menu">
          <h3 class="mb-2 leading-tight">
            Blog by <%= link_to 'Joonas Kykkänen', 'https://jonas.kay.pink/', class: 'no-underline' %>
          </h3>
          <p class="mb-3 leading-tight text-grey-darker">
            <%= config[:site_description] %>
          </p>
          <nav class="mt-6">
            <%= link_to 'Home', '/', class: 'hover:no-underline font-sans' %>
            <h4 class="mt-4">Archive</h4>
            <% blog.articles.group_by {|a| a.date.year }.each do |year, articles| %>
              <div class="my-3 font-sans">
                <a href="javascript:;" data-archive="<%= year %>" class="hover:no-underline"><%= year %></a>
                <span class="text-grey-darkest">(<%= articles.count %>)</span>
              </div>
              <ul class="pl-6 hidden" data-archive-list="<%= year %>">
                <% articles.each do |article| %>
                  <li class="my-2 leading-tight">
                    <a href="<%= article.url %>" class="no-underline ">
                      <%= article.title %>
                    </a>
                  </li>
                <% end %>
              </ul>
            <% end %>
          </nav>
          <%= partial 'form' %>
        </div>
        <main class="md:w-2/3 xl:w-full max-w-140 py-2 sm:px-8 md:pr-8 xl:px-0 md:mt-8 xl:mx-auto">
          <%= yield %>
        </main>
      </div>
    </div>
    <div class="bg-grey-lighter px-4 py-8">
      <div class="container mx-auto text-right">
        <footer class="inline-block max-w-140 text-left py-6">
          <div class="my-1"><strong>flashover</strong></div>
          <div class="text-sm">
            <em>noun</em>
            <ol>
              <li class="my-1">
                a high-voltage electric short circuit made through the air between exposed conductors.
              </li>
              <li class="my-1">
                an instance of a fire spreading very rapidly through the air because of intense heat.
              </li>
              <li class="my-1">
                the moment a conversation becomes real and alive, which occurs when a spark of trust
                shorts out the delicate circuits you keep insulated under layers of irony, momentarily
                grounding the static emotional charge you’ve built up through decades of friction with
                the world.
              </li>
            </ol>
          </div>
          <div class="mt-8 text-sm text-grey-darker">
            <div class="mb-2">
              Definition of flashover is provided by
              <a href="http://www.dictionaryofobscuresorrows.com/">The Dictionary of Obscure Sorrows</a>
            </div>
          </div>
        </footer>
      </div>
    </div>
  </body>
</html>
